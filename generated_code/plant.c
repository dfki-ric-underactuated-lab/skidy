#include "plant.h"
#include <math.h>

void forward_kinematics(double q1, double q2, double *out_533331568737891010) {

   out_533331568737891010[0] = cos(q1 + q2);
   out_533331568737891010[1] = -sin(q1 + q2);
   out_533331568737891010[2] = 0;
   out_533331568737891010[3] = L1*cos(q1) + L2*cos(q1 + q2);
   out_533331568737891010[4] = sin(q1 + q2);
   out_533331568737891010[5] = cos(q1 + q2);
   out_533331568737891010[6] = 0;
   out_533331568737891010[7] = L1*sin(q1) + L2*sin(q1 + q2);
   out_533331568737891010[8] = 0;
   out_533331568737891010[9] = 0;
   out_533331568737891010[10] = 1;
   out_533331568737891010[11] = 0;
   out_533331568737891010[12] = 0;
   out_533331568737891010[13] = 0;
   out_533331568737891010[14] = 0;
   out_533331568737891010[15] = 1;

}

void system_jacobian_matrix(double q2, double *out_105279131531531221) {

   out_105279131531531221[0] = 0;
   out_105279131531531221[1] = 0;
   out_105279131531531221[2] = 0;
   out_105279131531531221[3] = 0;
   out_105279131531531221[4] = 1;
   out_105279131531531221[5] = 0;
   out_105279131531531221[6] = 0;
   out_105279131531531221[7] = 0;
   out_105279131531531221[8] = 0;
   out_105279131531531221[9] = 0;
   out_105279131531531221[10] = 0;
   out_105279131531531221[11] = 0;
   out_105279131531531221[12] = 0;
   out_105279131531531221[13] = 0;
   out_105279131531531221[14] = 0;
   out_105279131531531221[15] = 0;
   out_105279131531531221[16] = 1;
   out_105279131531531221[17] = 1;
   out_105279131531531221[18] = L1*sin(q2);
   out_105279131531531221[19] = 0;
   out_105279131531531221[20] = L1*cos(q2);
   out_105279131531531221[21] = 0;
   out_105279131531531221[22] = 0;
   out_105279131531531221[23] = 0;

}

void body_jacobian_matrix(double q2, double *out_7158770792675460266) {

   out_7158770792675460266[0] = 0;
   out_7158770792675460266[1] = 0;
   out_7158770792675460266[2] = 0;
   out_7158770792675460266[3] = 0;
   out_7158770792675460266[4] = 1;
   out_7158770792675460266[5] = 1;
   out_7158770792675460266[6] = L1*sin(q2);
   out_7158770792675460266[7] = 0;
   out_7158770792675460266[8] = L1*cos(q2);
   out_7158770792675460266[9] = 0;
   out_7158770792675460266[10] = 0;
   out_7158770792675460266[11] = 0;

}

void hybrid_jacobian_matrix(double q1, double *out_7505495277599162950) {

   out_7505495277599162950[0] = 0;
   out_7505495277599162950[1] = 0;
   out_7505495277599162950[2] = 0;
   out_7505495277599162950[3] = 0;
   out_7505495277599162950[4] = 1;
   out_7505495277599162950[5] = 1;
   out_7505495277599162950[6] = -L1*sin(q1);
   out_7505495277599162950[7] = 0;
   out_7505495277599162950[8] = L1*cos(q1);
   out_7505495277599162950[9] = 0;
   out_7505495277599162950[10] = 0;
   out_7505495277599162950[11] = 0;

}

void system_jacobian_dot(double dq2, double q2, double *out_4561059558003435982) {

   out_4561059558003435982[0] = 0;
   out_4561059558003435982[1] = 0;
   out_4561059558003435982[2] = 0;
   out_4561059558003435982[3] = 0;
   out_4561059558003435982[4] = 0;
   out_4561059558003435982[5] = 0;
   out_4561059558003435982[6] = 0;
   out_4561059558003435982[7] = 0;
   out_4561059558003435982[8] = 0;
   out_4561059558003435982[9] = 0;
   out_4561059558003435982[10] = 0;
   out_4561059558003435982[11] = 0;
   out_4561059558003435982[12] = 0;
   out_4561059558003435982[13] = 0;
   out_4561059558003435982[14] = 0;
   out_4561059558003435982[15] = 0;
   out_4561059558003435982[16] = 0;
   out_4561059558003435982[17] = 0;
   out_4561059558003435982[18] = L1*dq2*cos(q2);
   out_4561059558003435982[19] = 0;
   out_4561059558003435982[20] = -L1*dq2*sin(q2);
   out_4561059558003435982[21] = 0;
   out_4561059558003435982[22] = 0;
   out_4561059558003435982[23] = 0;

}

void body_twist_ee(double dq1, double dq2, double q2, double *out_2202487785058670561) {

   out_2202487785058670561[0] = 0;
   out_2202487785058670561[1] = 0;
   out_2202487785058670561[2] = dq1 + dq2;
   out_2202487785058670561[3] = L1*dq1*sin(q2);
   out_2202487785058670561[4] = L1*dq1*cos(q2) + L2*(dq1 + dq2);
   out_2202487785058670561[5] = 0;

}

void hybrid_twist_ee(double dq1, double dq2, double q1, double q2, double *out_8673364558687002157) {

   out_8673364558687002157[0] = 0;
   out_8673364558687002157[1] = 0;
   out_8673364558687002157[2] = dq1 + dq2;
   out_8673364558687002157[3] = -L1*dq1*sin(q1) - L2*dq1*sin(q1 + q2) - L2*dq2*sin(q1 + q2);
   out_8673364558687002157[4] = L1*dq1*cos(q1) + L2*dq1*cos(q1 + q2) + L2*dq2*cos(q1 + q2);
   out_8673364558687002157[5] = 0;

}

void body_jacobian_matrix_ee(double q2, double *out_6279707935581118024) {

   out_6279707935581118024[0] = 0;
   out_6279707935581118024[1] = 0;
   out_6279707935581118024[2] = 0;
   out_6279707935581118024[3] = 0;
   out_6279707935581118024[4] = 1;
   out_6279707935581118024[5] = 1;
   out_6279707935581118024[6] = L1*sin(q2);
   out_6279707935581118024[7] = 0;
   out_6279707935581118024[8] = L1*cos(q2) + L2;
   out_6279707935581118024[9] = L2;
   out_6279707935581118024[10] = 0;
   out_6279707935581118024[11] = 0;

}

void hybrid_jacobian_matrix_ee(double q1, double q2, double *out_4641531331680948144) {

   out_4641531331680948144[0] = 0;
   out_4641531331680948144[1] = 0;
   out_4641531331680948144[2] = 0;
   out_4641531331680948144[3] = 0;
   out_4641531331680948144[4] = 1;
   out_4641531331680948144[5] = 1;
   out_4641531331680948144[6] = -L1*sin(q1) - L2*sin(q1 + q2);
   out_4641531331680948144[7] = -L2*sin(q1 + q2);
   out_4641531331680948144[8] = L1*cos(q1) + L2*cos(q1 + q2);
   out_4641531331680948144[9] = L2*cos(q1 + q2);
   out_4641531331680948144[10] = 0;
   out_4641531331680948144[11] = 0;

}

void generalized_mass_inertia_matrix(double q2, double *out_2142058865511428381) {

   out_2142058865511428381[0] = pow(L1, 2)*m1 + pow(L1, 2)*m2 + 2*L1*L2*m2*cos(q2) + pow(L2, 2)*m2;
   out_2142058865511428381[1] = L2*m2*(L1*cos(q2) + L2);
   out_2142058865511428381[2] = L2*m2*(L1*cos(q2) + L2);
   out_2142058865511428381[3] = pow(L2, 2)*m2;

}

void coriolis_centrifugal_matrix(double dq1, double dq2, double q2, double *out_8731067158543827054) {

   out_8731067158543827054[0] = -2*L1*L2*dq2*m2*sin(q2);
   out_8731067158543827054[1] = -L1*L2*dq2*m2*sin(q2);
   out_8731067158543827054[2] = L1*L2*m2*(dq1 - dq2)*sin(q2);
   out_8731067158543827054[3] = L1*L2*dq1*m2*sin(q2);

}

void gravity_vector(double q1, double q2, double *out_5408515624771725552) {

   out_5408515624771725552[0] = g*(L1*m1*cos(q1) + L1*m2*cos(q1) + L2*m2*cos(q1 + q2));
   out_5408515624771725552[1] = L2*g*m2*cos(q1 + q2);

}

void inverse_dynamics(double ddq1, double ddq2, double dq1, double dq2, double q1, double q2, double *out_7140826462901308056) {

   out_7140826462901308056[0] = pow(L1, 2)*ddq1*m1 + pow(L1, 2)*ddq1*m2 + 2*L1*L2*ddq1*m2*cos(q2) + L1*L2*ddq2*m2*cos(q2) - 2*L1*L2*dq1*dq2*m2*sin(q2) - L1*L2*pow(dq2, 2)*m2*sin(q2) + L1*g*m1*cos(q1) + L1*g*m2*cos(q1) + pow(L2, 2)*ddq1*m2 + pow(L2, 2)*ddq2*m2 + L2*g*m2*cos(q1 + q2);
   out_7140826462901308056[1] = L2*m2*(L1*ddq1*cos(q2) + L1*pow(dq1, 2)*sin(q2) + L2*ddq1 + L2*ddq2 + g*cos(q1 + q2));

}
